/* ==========================================================================
   BACKTRADZ ‚Äî DASHBOARD (Backtests + Mes CSV)
   Night theme ‚Ä¢ Variables centralis√©es ‚Ä¢ Aucune r√©gression
   - Tokens : layout, grilles, cartes, couleurs, anim
   - Tabs, Panel title (sans s√©parateur), Toolbar (Select + Search)
   - Grilles & cartes (dbt & csv), Modales, Responsive
   - Animations : Backtests + CSV du dashboard uniquement (pas le CSV Shop)
   ========================================================================== */


/* =========================
   1) DESIGN TOKENS / :root
   ========================= */
:root {
  /* Layout */
  --page-max: 1480px;
  --page-pad-x: clamp(12px, 3vw, 24px);
  --page-pad-top: 8px;                  /* espace sous navbar */

  /* Flow vertical */
  --stack-gap: clamp(14px, 2vw, 22px);  /* espace Toolbar ‚Üî Grilles */

  /* Grilles */
  --grid-gap: clamp(14px, 2vw, 22px);
  --grid-min: 320px;

  /* Cartes */
  --radius: 16px;
  --card-bg: #0f1627;
  --card-bd: rgba(255,255,255,0.06);
  --card-shadow: 0 10px 28px rgba(0,0,0,.25);
  --card-shadow-hover: 0 14px 36px rgba(0,0,0,.30);
  --hover-raise: 4px;

  /* Typo / Couleurs */
  --text-main: #eaf2ff;
  --text-soft: #9fb2d6;
  --text-muted: #93a1b7;

  /* Boutons / CTA */
  --cta-inset: 12px;
  /* Fond verre/aurora pour champs (Select + Input) */
  --field-bg:
    radial-gradient(130% 90% at 50% 70%,
      rgba(56,96,220,.12) 0%,
      rgba(22,34,68,.09) 42%,
      rgba(10,16,28,.08) 62%,
      rgba(6,10,18,.06) 82%,
      transparent 100%
    ),
    linear-gradient(180deg, rgba(5,8,14,.62) 0%, rgba(6,10,18,.62) 100%);
  --field-bd: rgba(90,130,255,.14);
  --field-shadow: inset 0 1px 0 rgba(255,255,255,.04), 0 0 12px rgba(0,100,255,.12);

  /* [V1.3] Aurora ‚ÄúHeroMessage‚Äù r√©utilisable pour les cartes */
  --card-aurora:
    radial-gradient(140% 100% at 50% 68%,
      rgba(56, 96, 220, 0.12) 0%,
      rgba(22, 34, 68, 0.09) 42%,
      rgba(10, 16, 28, 0.08) 62%,
      rgba(6, 10, 18, 0.06) 82%,
      transparent 100%
    ),
    linear-gradient(180deg,
      rgba(5, 8, 14, 0.62) 0%,
      rgba(6, 10, 18, 0.62) 100%
    );
  --card-aurora-bd: rgba(90,130,255,0.14);     /* bord bleut√© */
  --card-aurora-shadow:
    inset 0 1px 0 rgba(255,255,255,0.04),
    0 10px 38px rgba(0,0,0,0.45),
    0 0 12px rgba(0,100,255,0.12);

    /* Tabs */
  --tab-bd: rgba(91,141,255,.25);
  --tab-bg: rgba(18,25,40,.85);
  --tab-active: linear-gradient(135deg,#1e3a8a 0%,#2563eb 100%);

  /* Animations */
  --anim-ease: cubic-bezier(.22,.61,.36,1);
  --anim-in: 520ms var(--anim-ease) both;

  /* Titres */
  --title-pad-left: 2px;
  /* üîµ Accent plus profond (plus de ‚Äúbleu ciel‚Äù) */
  --title-accent: linear-gradient(180deg,#1e3a8a 0%, #2563eb 100%);
  --title-accent-bd: rgba(91,141,255,.45);  /* liser√© discret autour du ‚Äúpin‚Äù */
  /* Alignement visuel inputs/labels (si besoin) */
  --field-pad-x: 10px;
}


/* =========================
   2) CONTAINER / ROOT
   ========================= */
.dash-container {
  width: min(94vw, var(--page-max));
  margin: 0 auto;
  padding-inline: var(--page-pad-x);
  padding-top: var(--page-pad-top);
  padding-bottom: 70px;
  color: var(--text-main);
}
.dash-container.dash-wide { --page-max: 1580px; }

/* Wrapper logique (si tu veux piloter l‚Äôespacement global par tokens) */
.root { display: flex; flex-direction: column; gap: var(--stack-gap); }


/* =========================
   3) PILL TABS (onglets)
   ========================= */
.row-center.row-top {
  display:flex; justify-content:center;
  margin: 12px auto 0px;
  padding-inline: var(--page-pad-x);
  flex-wrap: wrap;
  position: relative; z-index: 30; /* au-dessus des cartes */
}


/* =========================
   4) PANEL / TITRE
   ========================= */
.panel { background: transparent; border: 0; box-shadow: none; margin: 0; padding: 0; }

.panel .panel-title {
  margin: 0 0 18px 0; /* <-- anti-saccade: spacing stable */
  padding-bottom: 4px;
  padding-left: var(--title-pad-left);
  font-size: clamp(26px, 2.4vw, 34px);
  line-height: 1.15;
  font-weight: 800;
  letter-spacing: .3px;
  display: flex; align-items: center; gap: 10px;
   /* Chrome typographique identique au Hero */
  color: var(--text-main); /* fallback non-webkit */
  background: linear-gradient(180deg, #f8faff 0%, #cdd9ff 48%, #9ab4ff 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  position: relative;
  /* profondeur subtile + lisibilit√© (m√™mes valeurs que Hero) */
  text-shadow:
    0 0 10px rgba(80,130,255,0.06),
    0 2px 6px rgba(0,0,0,0.35);
  transition: filter 0.4s ease;
  will-change: filter; /* micro-optimisation */
}

.panel .panel-title::before {
  content: "";
  width: 6px; height: 1.1em; border-radius: 999px;
  background: var(--title-accent);
  /* liser√© + halo doux (fini le bleu ciel) */
  border: 1px solid var(--title-accent-bd);
  box-shadow:
    0 0 18px rgba(37,99,235,.28),
    inset 0 1px 0 rgba(255,255,255,.06);
}

/* Soulignement premium discret qui se fond vers la droite */
.panel .panel-title::after{
  content:"";
  flex: 1 1 auto;
  height: 1px;
  margin-left: 14px;
  transform: translateY(3px);   /* ‚úÖ descend l√©g√®rement le filet */
  background: linear-gradient(
    90deg,
    rgba(56,120,255,.38),
    rgba(56,120,255,.16) 38%,
    rgba(0,0,0,0) 82%
  );
  filter: saturate(110%);
  opacity: .65;
}

/* ‚ùó Ne pas doubler la ligne sous "Mes backtests" (on a d√©j√† .section-sep) */
.panel .panel-title.db-title::after{
  content: none;
}

/* S√©parateur de section (entre √©pingles et backtests) */
.section-sep{
  height: 1px;
  margin: 18px 0 14px;
  position: relative;
  background:
    linear-gradient(90deg, rgba(0,0,0,0), rgba(56,120,255,.25) 16%, rgba(56,120,255,.35) 35%, rgba(56,120,255,.25) 54%, rgba(0,0,0,0) 86%);
}
.section-sep::after{
  content:"";
  position:absolute; inset:-8px 0 -8px 0;  /* halo tr√®s l√©ger */
  pointer-events:none;
  background: radial-gradient(60% 180% at 50% -40%, rgba(56,120,255,.12), transparent 70%);
  filter: blur(6px);
  opacity:.5;
}


/* =========================
   5) TOOLBAR (filters / search / sort)
   ========================= */
.bt-toolbar {
  display: grid;
  grid-template-columns: 1fr 1fr auto; /* filtre | recherche | tri */
  gap: var(--grid-gap);
  position: relative; z-index: 50;   /* menus au-dessus des cartes */
  overflow: visible;
}
.bt-ctrl { display: grid; grid-template-rows: auto 1fr; align-items: start; min-width: 220px; }
.bt-label { margin: 0 0 6px; font-size: 13px; color: var(--text-soft); }
.bt-select, .bt-input{
  height: 44px; border-radius: 10px;
  /* ‚úÖ m√™me verre/aurora que sur tes Selects */
  background: var(--field-bg);
  color:#cfe1ff;
  border: 1px solid var(--field-bd);
  box-shadow: var(--field-shadow);
  padding: 0 12px; outline: none;
  backdrop-filter: blur(4px) saturate(112%);
  -webkit-backdrop-filter: blur(4px) saturate(112%);
}
.bt-select:focus, .bt-input:focus{
  box-shadow:
    0 0 0 3px rgba(96,165,250,.25),
    var(--field-shadow);
  border-color: rgba(255,255,255,.10);
}

/*===== input =====*/
.bt-input-wrap { position: relative; }
.bt-input-ico {
  position: absolute; left: 10px; top: 50%;
  transform: translateY(-50%);
  opacity: .9;                 /* plus lisible */
  pointer-events: none;
  z-index: 2;                  /* ‚úÖ au-dessus de l‚Äôinput (plus de flou) */
}
.bt-input { padding-left: 34px; }

/* Placeholder clair (m√™me esprit que le texte) */
.bt-input::placeholder{
  color: #eaf2ff;              /* ou var(--text-main) */
  opacity: .72;
}

/* menus des Select au premier plan */
.bt-toolbar .strt-select { width: 100%; }
.bt-toolbar .strt-panel { z-index: 1000; }

/* Toolbar sp√©cifique ‚ÄúMes CSV‚Äù (si utilis√©e) */
.csv-toolbar {
  display:grid; grid-template-columns: minmax(240px, 360px);
  gap:16px; align-items:end;
  margin:14px 0 8px; position:relative; z-index:50; overflow:visible;
}
.csv-toolbar .strt-panel { z-index: 1000; }


/* =========================
   6) GRILLES
   ========================= */
/* Grille backtests ‚Äúclassique‚Äù */
.cards, .cards-grid {
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(var(--grid-min), 1fr));
  gap: var(--grid-gap);
}

/* Grille Mes CSV (dashboard) : grille 12 colonnes ‚Üí cartes 3/4/6/12 */
.csv-page .csv-grid {
  display:grid; grid-template-columns: repeat(12, 1fr); gap: 24px;
}
.csv-page .csv-grid > .csv-card { grid-column: span 3; }
@media (max-width: 1200px){ .csv-page .csv-grid > .csv-card { grid-column: span 4; } }
@media (max-width: 900px) { .csv-page .csv-grid > .csv-card { grid-column: span 6; } }
@media (max-width: 640px) { .csv-page .csv-grid > .csv-card { grid-column: span 12; } }

/* marge de respiration (au cas o√π la grille ne soit pas dans .root) */
.cards, .cards-grid, .csv-page .csv-grid { margin-top: var(--stack-gap); }


/* =========================
   7) ANIMATIONS (entr√©e)
   ========================= */
/* Keyframes unique */
/* Keyframes unique ‚Äî inchang√© */
@keyframes cardIn {
  from { opacity:0; transform: translateY(12px) scale(.98); }
  to   { opacity:1; transform: translateY(0)    scale(1); }
}

/* ‚úÖ Backtests : joue l'anim (nom + dur√©e d√©finie via --anim-in) */
.cards-grid > .dbt-card {
  animation: cardIn var(--anim-in);
  will-change: opacity, transform;
}

/* ‚úÖ Mes CSV (DASHBOARD UNIQUEMENT) ‚Äî n'affecte PAS le CSV Shop */
.dash-container .csv-page .csv-grid > .csv-card {
  animation: cardIn var(--anim-in);
  will-change: opacity, transform;
}

/* Stagger l√©ger ‚Äî inchang√© (les delays restent valables) */


/* Stagger l√©ger */
.cards-grid > *:nth-child(1),
.dash-container .csv-page .csv-grid > *:nth-child(1) { animation-delay: 0ms; }
.cards-grid > *:nth-child(2),
.dash-container .csv-page .csv-grid > *:nth-child(2) { animation-delay: 40ms; }
.cards-grid > *:nth-child(3),
.dash-container .csv-page .csv-grid > *:nth-child(3) { animation-delay: 80ms; }
.cards-grid > *:nth-child(4),
.dash-container .csv-page .csv-grid > *:nth-child(4) { animation-delay: 120ms; }
.cards-grid > *:nth-child(5),
.dash-container .csv-page .csv-grid > *:nth-child(5) { animation-delay: 160ms; }

/* Accessibilit√© : d√©sactive anim sans rendre les cartes invisibles */
@media (prefers-reduced-motion: reduce){
  .cards-grid > .dbt-card,
  .dash-container .csv-page .csv-grid > .csv-card {
    animation: none;
  }
}


/* =========================
   8) CARTES BACKTESTS (.dbt-*)
   ========================= */
.dbt-card{
  position: relative;
  /* [V1.3] m√™me aurora que HeroMessage (verre + lueur interne) */
  background: var(--card-aurora, var(--card-bg));   /* fallback si var absente */
  border: 1px solid var(--card-aurora-bd, var(--card-bd));
  border-radius: var(--radius);
  padding:14px;
  display:flex; flex-direction:column; gap:12px;
  box-shadow: var(--card-aurora-shadow, var(--card-shadow));
  backdrop-filter: blur(4px) saturate(112%);
  -webkit-backdrop-filter: blur(4px) saturate(112%);
  transition: transform .16s ease, box-shadow .18s ease, border-color .18s ease;
  overflow:hidden;
}
.dbt-card:hover{
  transform: translateY(calc(-1 * var(--hover-raise)));
  box-shadow: var(--card-shadow-hover);
  border-color: rgba(255,255,255,.10);
}
.dbt-card:focus-within{
  border-color: rgba(120,170,255,.45);
  box-shadow: 0 0 0 2px rgba(15,110,255,.25), var(--card-shadow);
}

/* [V1.3] Sp√©cificit√© s√ªre (au cas o√π un vieux CSS override le fond) */
.dash-container .dbt-card{ background: var(--card-aurora, var(--card-bg)); }

/* Le header n‚Äôutilise plus space-between pour √©viter le ‚Äúflottement‚Äù
  quand la date passe sur 2 lignes. On pousse la date √† droite avec
    margin-left:auto et on l‚Äôaligne visuellement √† droite. */
.dbt-header{
   display:flex;
   align-items:center;
   justify-content:flex-start; /* la date sera pouss√©e par margin-left:auto */
   gap: 10px;
}

 /* La date occupe l‚Äôespace restant et s‚Äôaligne bien sur le bord droit
    de la carte m√™me si elle wrappe sur 2 lignes. */
.dbt-period{
   margin-left:auto;     /* pousse compl√®tement √† droite */
   text-align:right;     /* texte align√© √† droite */
   max-width: 50%;       /* limite la largeur pour √©viter d‚Äô√©craser le titre */
 }
.dbt-title{ display:flex; align-items:center; gap:10px; font-weight:700; color: var(--text-main); }
.dbt-pair{ font-size:16px; letter-spacing:.3px; }
.dbt-badge{
  font-size:12px; padding:4px 8px; border-radius:999px;
  background: rgba(37,99,235,.15);
  border: 1px solid rgba(37,99,235,.35);
  color:#9fc1ff;
}
.dbt-period{ color: var(--text-soft); font-size: 13px; }

.dbt-meta{ display:flex; flex-direction:column; gap:6px; }
.dbt-row{ display:flex; align-items:center; justify-content:space-between; }
.dbt-label{ color: var(--text-soft); font-size: 13px; }
.dbt-val{ color: var(--text-main); font-weight: 600; }
.num{ font-variant-numeric: tabular-nums; }
.dbt-card .strategy{
  display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;
  overflow:hidden;
}

.dbt-actions-primary{
  /* [V1.3] Layout propre ‚Äî m√™me padding que la rang√©e secondaire */
  margin-top: 12px;
  display:flex; justify-content:center; align-items:center; gap:0;
  padding: 0 var(--cta-inset);
  background: transparent; border: 0; box-shadow: none;
}

/* Le CTA g√®re d√©j√† ses dimensions */
.dbt-actions-primary .cta-btn{
  width: 100%;
  max-width: 420px;
}

.dbt-actions-secondary{
  display:grid; grid-template-columns: 1fr 1fr; gap:10px;
  margin-top:10px; padding:0 var(--cta-inset);   /* identique au CTA */
}

/* ‚úÖ Mobile/Tablet ‚Äî conserve les 2 boutons c√¥te √† c√¥te, mais plus compacts */
@media (max-width:700px){
  .dbt-actions-secondary {
    grid-template-columns: 1fr 1fr;   /* reste c√¥te √† c√¥te */
    gap: 8px;
  }
  .dbt-actions-secondary .dbt-btn,
  .dbt-actions-secondary button,
  .dbt-actions-secondary a {
    font-size: 13px;          /* texte plus petit */
    height: 40px;             /* hauteur r√©duite */
    padding: 0 8px;           /* moins de padding horizontal */
  }
  .dbt-actions-primary .cta-btn {
    height: 42px;
    font-size: 14px;
    max-width: 320px;         /* r√©duit un peu le CTA central */
  }
}


/* Les boutons remplissent leur colonne (100% largeur) */
.dbt-actions-secondary .col{ display:flex; }
.dbt-actions-secondary .col > *{ width:100%; }
.dbt-actions-secondary .dbt-btn,
.dbt-actions-secondary button,
.dbt-actions-secondary a{ width:100%; }

/* =========================
   9) CARTES CSV (dashboard)
   ========================= */
/* scope .csv-page pour ne pas toucher le CSV Shop */
.csv-page .csv-card{
  background:
    /* aurora : lueur centrale/basse bleut√©e, tr√®s douce */
    radial-gradient(140% 100% at 50% 68%,
      rgba(56, 96, 220, 0.12)  0%,     /* halo un poil moins dense */
      rgba(22, 34, 68, 0.09)  42%,
      rgba(10, 16, 28, 0.08)  62%,
      rgba(6, 10, 18, 0.06)  82%,
      transparent 100%
    ),
    /* couche de profondeur quasi noire (comme la navbar) */
    linear-gradient(180deg,
      rgba(5, 8, 14, 0.62) 0%,         /* base plus transparente */
      rgba(6, 10, 18, 0.62) 100%
    );
  border: 1px solid rgba(90,130,255,0.14);      /* bord un peu moins pr√©sent */
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.04),   /* l√©ger relief interne */
    0 10px 38px rgba(0,0,0,0.45),
    0 0 12px rgba(0,100,255,0.12);
  transition: box-shadow .4s ease, transform .4s ease, border-color .4s ease;
  backdrop-filter: blur(4px) saturate(112%);   /* +blur, -saturation = plus ‚Äúverre‚Äù */
  border-radius: var(--radius);
  padding: 18px 20px;
}
.csv-page .csv-card:hover{
  transform: translateY(calc(-1 * var(--hover-raise)));
  box-shadow: var(--card-shadow-hover);
  border-color: rgba(255,255,255,.10);
}
.csv-page .csv-card .csv-meta{
  margin-top:14px;
  display:grid; grid-template-columns:1fr 1fr; gap:10px 18px;
}
.csv-card .csv-source.library{ color:#a8c5ff; }
.csv-card .csv-source.live   { color:#fca5a5; }
.csv-page .csv-card .csv-actions{
  margin-top:16px; display:flex; gap:12px; width:100%;
}
.csv-page .csv-card .csv-actions > *{ flex:1 1 0; min-width:0; }
.csv-page .csv-card .dbt-btn,
.csv-page .csv-card .cta-btn{
  width:100%; height:48px; display:flex; align-items:center; justify-content:center;
  box-sizing:border-box;
}

/* neutraliser tout vieux suffixe ‚Äú-1 cr√©dit‚Äù sur CTA */
.csv-page .csv-card .dbt-btn::after { content: none !important; }


/* =========================
   10) MODALES
   ========================= */
.modal-backdrop{
  position: fixed; inset: 0;
  background: rgba(0,0,0,.45);
  display:flex; align-items:center; justify-content:center;
  z-index: 9999; padding: 16px;
}
.modal{
  width: min(520px, 95vw);
  background: rgba(16,22,35,.98);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 14px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.45);
  padding: 20px; color:#e8eefc;
}
.modal-actions{ margin-top: 16px; display:flex; gap:12px; justify-content:flex-end; }

/* (Backtests) */
.dbt-modal-overlay{
  position: fixed; inset:0; background: rgba(5,13,28,.55);
  backdrop-filter: blur(2px); z-index: 1000;
  display:grid; place-items:center; padding:16px;
}
.dbt-modal{
  width:min(880px,92vw); max-height:min(80vh,900px); overflow:auto;
  background:#121a2a; border:1px solid rgba(255,255,255,0.06);
  border-radius: var(--radius); box-shadow: 0 20px 70px rgba(0,0,0,.45);
  padding:18px; color: var(--text-main);
}
.dbt-modal-header{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px; }
.dbt-modal-title{ display:flex; align-items:center; gap:8px; font-weight:600; }
.dbt-title-strategy{ opacity:.9; font-weight:600; }
.dbt-tag{
  font-size:12px; padding:4px 8px; border-radius:999px;
  background: rgba(59,130,246,.12); border:1px solid rgba(59,130,246,.25);
}
.dbt-modal-close{ background:transparent; border:0; color:#cbd5e1; font-size:18px; line-height:1; cursor:pointer; }
.dbt-modal-grid{ display:grid; grid-template-columns:repeat(4,1fr); gap:10px; }
@media (max-width:1024px){ .dbt-modal-grid{ grid-template-columns:repeat(3,1fr); } }
@media (max-width: 720px){ .dbt-modal-grid{ grid-template-columns:repeat(2,1fr); } }
.dbt-kpi{
  border:1px solid rgba(255,255,255,0.06); background: rgba(255,255,255,0.02);
  border-radius:10px; padding:10px 12px;
}
.dbt-kpi-label{ font-size:12px; color:#9aa5b1; margin-bottom:4px; }
.dbt-kpi-value{ font-size:16px; font-weight:600; color:#e7eef7; }


/* =========================
   11) RESPONSIVE
   ========================= */
@media (max-width: 1200px){
  .bt-toolbar{ grid-template-columns: 1fr 1fr; }
  .bt-ctrl:last-child{ justify-self:start; }
}
@media (max-width: 900px){
  .dash-container{ width: 98vw; }
  .bt-toolbar{ grid-template-columns: 1fr; }
  .bt-ctrl{ min-width: 0; }
}
@media (max-width: 640px){
  .bt-select, .bt-input{ height: 42px; }
  .cards, .cards-grid{ grid-template-columns: 1fr; } /* 1 carte / ligne */
}


/* =========================
   12) UTILITAIRES
   ========================= */
.sr-only {
  position: absolute !important;
  width: 1px; height: 1px;
  padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0,0,0,0);
  white-space: nowrap; border: 0;
}

/*===============mes epingles============== */

/* Bouton "Afficher plus" */
.list-more{ display:flex; align-items:center; justify-content:center; gap:12px; margin-top:16px; }
.list-more .dbt-btn{ min-width: 180px; }
.list-more-meta{ font-size:.9rem; color: var(--text-soft); }


.pins-section { margin-top: 16px; position: relative; z-index: 25; }

.pins-header {
  display:flex; align-items:center; justify-content:space-between;
  padding: 8px 4px; border-top: 1px solid rgba(255,255,255,.06);
}
.pins-header .title { font-size: 20px; font-weight: 700; }
.btn-toggle {
  padding: 8px 12px; border-radius: 10px; border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.04); color: #fff;
}
.btn-toggle:hover { background: rgba(255,255,255,.08); }

/* Section titres */
.db-title {
  margin: 32px 0 16px;
}

 .pins-panel {
  margin-top: 10px;
  position: relative; z-index: 25;   /* passe bien au-dessus de la grille suivante */
 }
/* Carte √©pingle */
.pin-card {
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  gap: 16px;
  padding: 14px 16px;
  margin: 12px 0;
  /* ‚úÖ m√™me look que .dbt-card */
  background:
    /* aurora : lueur centrale/basse bleut√©e, tr√®s douce */
    radial-gradient(140% 100% at 50% 68%,
      rgba(56, 96, 220, 0.12)  0%,     /* halo un poil moins dense */
      rgba(22, 34, 68, 0.09)  42%,
      rgba(10, 16, 28, 0.08)  62%,
      rgba(6, 10, 18, 0.06)  82%,
      transparent 100%
    ),
    /* couche de profondeur quasi noire (comme la navbar) */
    linear-gradient(180deg,
      rgba(5, 8, 14, 0.62) 0%,         /* base plus transparente */
      rgba(6, 10, 18, 0.62) 100%
    );
  border: 1px solid rgba(90,130,255,0.14);      /* bord un peu moins pr√©sent */
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.04),   /* l√©ger relief interne */
    0 10px 38px rgba(0,0,0,0.45),
    0 0 12px rgba(0,100,255,0.12);
  transition: box-shadow .4s ease, transform .4s ease, border-color .4s ease;
  backdrop-filter: blur(4px) saturate(112%);   /* +blur, -saturation = plus ‚Äúverre‚Äù */
  border: 1px solid var(--card-bd);
  border-radius: var(--radius);
}

/* Colonne gauche */
.pin-left { min-width: 0; }
.pin-line {
  display: flex;
  gap: 8px;
  align-items: center;
  font-weight: 600;
}
.pin-type   { opacity: .9; }
.pin-dot    { opacity: .4; }
.pin-key    { opacity: .95; }
.pin-folder { margin-top: 6px; opacity: .7; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.pin-folder code { opacity: .9; }

/* Colonne droite (valeur + bouton) */
.pin-right {
  display: flex;
  align-items: center;
  gap: 12px;
}
.pin-value {
  font-size: 20px;
  font-weight: 700;
  letter-spacing: .2px;
  min-width: 64px;
  text-align: right;     /* valeur bien align√©e √† droite */
}
.pin-remove {
  border: 1px solid rgba(255,0,64,.25);
  background: rgba(255,0,64,.08);
  color: #ff839a;
  padding: 6px 12px;
  border-radius: 10px;
  transition: .15s ease;
}
.pin-remove:hover {
  background: rgba(255,0,64,.14);
  border-color: rgba(255,0,64,.35);
}

/* Barre unique ‚ÄúMes √©pingles‚Äù : 5 colonnes sur grand √©cran, wrap sinon */
.bt-toolbar--pins {
  grid-template-columns: repeat(5, minmax(200px, 1fr));
}
@media (max-width: 1200px){
  .bt-toolbar--pins { grid-template-columns: repeat(3, 1fr); }
}
@media (max-width: 900px){
  .bt-toolbar--pins { grid-template-columns: 1fr; }
}

/* Aligner la carte (valeur + Retirer) dans le header */
.pin-head { display:flex; align-items:center; justify-content:space-between; gap:12px; }
.pin-right{ display:flex; align-items:center; gap:12px; }

/* Scope: seulement dans la section "Mes √©pingles" */
.pins-wall .bt-toolbar { 
  overflow: visible;                 /* √©vite que le menu soit coup√© */
}

/* Quand un Select est ouvert, on le met au-dessus des autres champs */
.pins-wall .strt-select[data-open="true"] {
  z-index: 5000;                     /* > cartes / autres inputs */
}

/* Le panneau du menu doit flotter au-dessus de tout dans la section */
.pins-wall .strt-panel {
  z-index: 10000;                    /* > z-index locaux */
}

/* Scope strict : section "Mes √©pingles" seulement */
.pins-wall .bt-toolbar { overflow: visible; }

/* le Select ouvert passe au-dessus des autres champs */
.pins-wall .bt-toolbar .strt-select[data-open="true"] {
  position: relative;
  z-index: 11000 !important;  /* priorit√© > r√®gle globale */
}

/* le panel du menu tout en haut de la pile dans cette section */
.pins-wall .bt-toolbar .strt-panel {
  z-index: 12000 !important;  /* priorit√© > .bt-toolbar .strt-panel */
}

.pins-wall .bt-toolbar { overflow: visible; }

/* Section Mes √©pingles */
.pins-wall .pins-adv-summary{
  display:flex;
  align-items:center;
  height:42px;        /* m√™me hauteur visuelle que les Selects */
  margin:0 0 8px;     /* petit espace sous le summary */
  line-height:1;
}
.pins-wall .pins-adv-grid{
  align-items:center; /* aligne tous les √©l√©ments de la grille */
  margin-top:0;
}
.pins-wall .pins-search .bt-input-wrap{
  height:42px;        /* m√™me hauteur que les Selects */
}

/* Mes √©pingles ‚Äî largeur et alignement de la recherche */
.pins-wall .pins-adv-grid { align-items: center; }
.pins-wall .pins-search,
.pins-wall .pins-search .bt-input-wrap,
.pins-wall .pins-search .bt-input {
  width: 100%;           /* m√™me largeur que les Selects */
  box-sizing: border-box;
  height: 42px;          /* m√™me hauteur visuelle qu‚Äôun Select */
}

/* Mes √©pingles ‚Äî liste sans retrait √† gauche */
.pins-wall .pins-list {
  list-style: none;
  padding: 0;            /* supprime le padding-left du <ul> */
  margin: 12px 0 0;
}

/* Section "Mes √©pingles" */
.pins-wall { 
  border-top: none !important;     /* si la ligne est appliqu√©e en border */
  box-shadow: none !important;     /* au cas o√π un shadow simule la ligne */
  margin-top: 0;                   /* resserre l‚Äôespacement avec le titre au-dessus */
}

hr + .pins-wall { /* fallback CSS-only pour masquer l‚Äôhr pr√©c√©dent */
  position: relative;
}
hr + .pins-wall::before {
  content: none;                    /* neutralise toute pseudo-ligne √©ventuelle */
}

.pins-header {
  display: flex;
  align-items: center;
  justify-content: space-between;

  /* avant : padding: 8px 4px; border-top: 1px solid ... */
  padding: 0;          /* aligne le titre exactement comme ‚ÄúMes backtests‚Äù */
  margin: 0 0 14px;    /* espace dessous */
  border: 0;           /* supprime le s√©parateur */
}

/* pas de marge parasite sur le titre √† l‚Äôint√©rieur de la barre */
.pins-header .panel-title { margin: 0; }

/* ------- Mes √©pingles: header "Filtres avanc√©s" ------- */
.pins-wall .pins-adv { margin-top: 8px; }

/* Summary styl√© comme un champ: m√™me padding/hauteur que les Select */
.pins-wall .pins-adv-summary{
  display: flex;
  align-items: center;
  width: 100%;
  height: 42px;                     /* m√™me hauteur visuelle qu‚Äôun Select */
  padding: 0 12px;                  /* m√™me padding gauche -> plus de d√©calage */
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 12px;
  background: rgba(255,255,255,.02);
  line-height: 1;
  margin: 0 0 8px;                  /* petit espace sous le summary */
}

/* On masque le marqueur natif du <summary> pour √©viter le d√©calage */
.pins-wall .pins-adv-summary::-webkit-details-marker { display: none; }
.pins-wall .pins-adv-summary::marker { content: ""; }

/* Chevron √† droite (indicateur de d√©roul√©) */
.pins-wall .pins-adv-summary::after{
  content: "‚ñæ";
  margin-left: auto;
  opacity: .7;
  transform: translateY(1px);
  transition: transform .18s ease;
}
.pins-wall details[open] .pins-adv-summary::after{
  transform: rotate(180deg) translateY(-1px);
}

/* Grille des filtres avanc√©s bien align√©e avec les champs */
.pins-wall .pins-adv-grid{
  align-items: center;
  margin-top: 0;
}

/* Harmonise l‚Äôespacement entre les sections */
.db-title {           /* "Mes backtests" */
  margin-top: 30px;   /* ‚Üë ajuste √† ton go√ªt (20‚Äì28px) */
}

/* ‚úÖ Scroll horizontal pour les cartes √©pingl√©es uniquement sur mobile */
@media (max-width: 768px) {
  .pin-card {
    display: flex;               /* au lieu du grid rigide */
    flex-wrap: nowrap;
    overflow-x: auto;            /* active la scroll bar horizontale */
    -webkit-overflow-scrolling: touch; /* scroll fluide iOS */
    scrollbar-width: thin;       /* scroll fin Firefox */
  }

  .pin-card::-webkit-scrollbar {
    height: 6px;                 /* petite barre discr√®te */
  }
}

/* ------ Pinned toolbar (force 4 colonnes en desktop, stack en responsive) ------ */
.pins-wall .pins-toolbar { grid-template-columns: repeat(4, minmax(0,1fr)); }
.pins-wall .pins-adv-grid { grid-template-columns: repeat(4, minmax(0,1fr)); }

/* h√©rite d√©j√† de .bt-toolbar ‚Üí passe √† 1 colonne sous 900px, mais on renforce au besoin */
@media (max-width: 900px){
  .pins-wall .pins-toolbar,
  .pins-wall .pins-adv-grid { grid-template-columns: 1fr; }
}

/* Harmoniser tailles dans la section Mes √©pingles */
.pins-wall .pin-right .detail-btn,
.pins-wall .pin-right .pin-remove {
  padding: 6px 12px;          /* m√™me padding */
  font-size: 14px;            /* taille coh√©rente */
  height: auto;               /* pas de hauteur forc√©e diff√©rente */
  min-width: 72px;            /* largeur mini uniforme */
}

