
/* frontend-react/src/pages/comparateur/comparateur.css
   ----------------------------------------------------
   • Style aligné à La DA (dark)
   • Scopé sous .cmp- pour éviter toute régression
   • Tokens locaux au :root pour unifier les couleurs
*/

/* =============== ROOT TOKENS (spécifiques comparateur) =============== */
:root {
  /* Surfaces foncées (alignées visuellement à ta navbar) */
  --cmp-surface-0: rgba(8, 16, 32, 0.80);  /* carte/section principale */
  --cmp-surface-1: rgba(8, 16, 32, 0.70);  /* champs/inputs/éléments internes */
  --cmp-surface-2: rgba(8, 16, 32, 0.60);  /* éléments secondaires (pills/badges) */

   /* 🔧 Track de scrollbar sombre (manquait → restait blanc par défaut) */
  --cmp-scroll-track: var(--cmp-surface-1);
  /* 🔧 Thumb de scrollbar (clair sur fond sombre) */
  --cmp-scroll-thumb: rgba(255,255,255,0.22);
  --cmp-scroll-thumb-hover: rgba(255,255,255,0.35);

  /* Traits / séparateurs */
  --cmp-stroke-0: rgba(255,255,255,0.10);
  --cmp-stroke-1: rgba(255,255,255,0.08);

  /* Ombres cartes */
  --cmp-shadow: 0 8px 28px rgba(0,0,0,0.35);
}

.cmp-page {
  /* ↓ on réduit le padding bas pour rapprocher du footer */
  padding: 32px 20px 24px; /* (avant 60px) */
  min-height: 100vh;             /* ✅ la page occupe toute la hauteur */
  display: flex;
  flex-direction: column;
}

.cmp-title {
  font-size: 28px;
  font-weight: 800;
  letter-spacing: 0.2px;
  margin: 0;
}
.cmp-sub {
  opacity: 0.8;
  margin-top: 6px;
}

.cmp-header {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: 16px;
  margin-bottom: 24px;
}

.cmp-counter {
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.06);
  padding: 8px 12px;
  border-radius: 999px;
  font-weight: 700;
  backdrop-filter: blur(6px);
}

.cmp-content {
  display: grid;
  grid-template-columns: 380px 1fr;
  gap: 22px;
  flex: 1;                        /* ✅ le contenu remplit l'espace sous le header */
  align-items: start;
}

.cmp-box {
  /* ====== CARD / SECTION ====== */
  background: var(--cmp-surface-0);
  border: 1px solid var(--cmp-stroke-0);
  border-radius: 16px;
  padding: 16px;
  box-shadow: var(--cmp-shadow);
  /* ↓ évite une marge basse implicite si un style global cible .card */
  margin-bottom: 0;
}

.cmp-left-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 14px;
}
.cmp-search {
  flex: 1;
  background: var(--cmp-surface-1);
  border: 1px solid var(--cmp-stroke-1);
  border-radius: 12px;
  padding: 10px 12px;
  color: inherit;
  outline: none;
}
.cmp-pill {
  padding: 8px 12px;
  border-radius: 999px;
  font-weight: 700;
  background: linear-gradient(90deg, rgba(50,120,255,0.35), rgba(75,0,255,0.30));
  border: 1px solid var(--cmp-stroke-1);
}

.cmp-list {
  /* Liste propre, sans bullet, pens&eacute;e pour de TR&Egrave;S nombreuses analyses */
  display: flex;
  flex-direction: column;
  gap: 10px;
  list-style: none;           /* 🔥 enlève le point à gauche */
  margin: 0;
  padding: 0 6px 0 0;
  /* ✅ liste plus haute : quasi jusqu’au footer, tout en restant scrollable */
  max-height: calc(100vh - 220px);
  overflow: auto;
}
.cmp-item {
  position: relative; /* nécessaire pour le pseudo-élément d’accent */
  border-radius: 12px;
  padding: 10px;
  background: var(--cmp-surface-1);
  border: 1px solid var(--cmp-stroke-1);
  transition: transform .12s ease, background .12s ease, border-color .12s ease;
}
.cmp-item:hover {
  transform: translateY(-1px);
  background: rgba(8,16,32,0.78);
  border-color: var(--cmp-stroke-0);
}
.cmp-item.is-checked {
  /* fond légèrement relevé au lieu d’un halo bleu */
  background: linear-gradient(180deg, rgba(70,140,255,0.10), rgba(70,140,255,0.06)), var(--cmp-surface-1);
  border-color: rgba(90,150,255,0.38);
}
/* Accent latéral à gauche quand sélectionné (propre, sans “glow”) */
.cmp-item.is-checked::before {
  content: "";
  position: absolute;
  left: -1px;
  top: 6px;
  bottom: 6px;
  width: 4px;
  border-radius: 4px;
  background: linear-gradient(180deg, #5AA0FF, #7C6BFF);
  box-shadow: 0 0 0 1px rgba(90,150,255,0.35), 0 2px 8px rgba(90,150,255,0.25);
}
.cmp-item.is-disabled {
  opacity: 0.55;
  pointer-events: none;
}
.cmp-item-row {
  display: grid;
  grid-template-columns: 28px 1fr; /* un peu plus large pour la checkbox custom */
  gap: 10px;
  align-items: start;
}
.cmp-item-main { display: grid; gap: 4px; }
.cmp-item-top {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}
.cmp-item-title { font-weight: 700; }
.cmp-item-sub { opacity: 0.85; display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
.cmp-mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
.cmp-dot { opacity: 0.6; }

/* Badge générique conservé pour compat */
.cmp-badge {
  background: var(--cmp-surface-2);
  border: 1px solid var(--cmp-stroke-1);
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 700;
}
/* Variante trades : 2 lignes, look plus premium */
.cmp-badge--trades {
  display: grid;
  grid-auto-flow: row;
  align-items: center;
  justify-items: center;
  min-width: 54px;
  padding: 6px 10px;
  background: linear-gradient(180deg, rgba(70,140,255,0.16), rgba(70,140,255,0.10));
  border: 1px solid rgba(90,150,255,0.35);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.12);
  border-radius: 12px;
}
.cmp-badge--trades b { font-size: 14px; line-height: 1; }
.cmp-badge--trades i { font-style: normal; font-size: 10px; opacity: .85; line-height: 1; }

.cmp-right { display: grid; gap: 16px; }
.cmp-tools { display: grid; gap: 12px; }
.cmp-selects { display: flex; gap: 12px; flex-wrap: wrap; }
.cmp-select { display: grid; gap: 6px; min-width: 220px; }
/* Select natif (fallback) — ton Select custom garde ses propres styles,
   mais le conteneur .cmp-box déjà foncé harmonise le rendu global. */
.cmp-select select {
  background: var(--cmp-surface-1);
  border: 1px solid var(--cmp-stroke-1);
  border-radius: 12px;
  padding: 10px 12px;
  color: inherit;
  outline: none;
}

.cmp-chart { padding: 0; overflow: hidden; }
.cmp-chart-head {
  padding: 16px 16px 0 16px;
  display: grid;
  gap: 12px;
}
.cmp-chart-title { font-weight: 800; font-size: 18px; letter-spacing: .2px; }
.cmp-legend { display: flex; flex-wrap: wrap; gap: 8px; }
.cmp-legend-pill {
  border-radius: 999px;
  padding: 6px 10px;
  font-size: 12px;
  font-weight: 700;
  border: 1px solid var(--cmp-stroke-1);
  background: var(--cmp-surface-2);
}
.cmp-legend-pill.c1 { background: #43A6FF; }
.cmp-legend-pill.c2 { background: #9B59FF; }
.cmp-legend-pill.c3 { background: #00D0A6; }
.cmp-legend-pill.c4 { background: #FFA833; }
.cmp-legend-pill.c5 { background: #FF2E8A; }
.cmp-legend-pill.c6 { background: #6266FF; }

.cmp-table-wrap { overflow-x: auto; padding: 12px 16px 16px; }
.cmp-table-wrap.scrollable {
  /* 🧭 Quand il y a beaucoup de lignes (ex: 24 heures), on borne la hauteur
     et on active un scroll vertical pour ne plus tasser le graphe. */
  max-height: 280px;       /* valeur douce : ~8–10 lignes visibles */
  overflow-y: auto;
  overscroll-behavior: contain;
  border-bottom: 1px solid var(--cmp-stroke-1); /* séparation propre avec le canvas */
}
.cmp-table {
  width: 100%;
  border-collapse: collapse;
}
.cmp-table th, .cmp-table td {
  padding: 10px 12px;
  border-bottom: 1px dashed rgba(255,255,255,0.08);
  text-align: left;
}
.cmp-table th { opacity: 0.8; font-weight: 700; }
.cmp-bucket { font-weight: 700; opacity: 0.9; }

.cmp-chart-canvas {
  /* ✅ on laisse le conteneur grandir ; on garde un plancher visuel propre */
  min-height: 360px;
  border-top: 1px solid var(--cmp-stroke-1);
  /* fond plus sombre sous le canvas pour coller au reste */
  background: linear-gradient(180deg, rgba(8,16,32,0.72), rgba(8,16,32,0.68));
  /* 🔁 Permettre le scroll horizontal SI le canvas est plus large (mobile) */
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  /* ↓ enlève l’espace inutile sous le chart */
  margin-bottom: 0;
  padding-bottom: 0;
}

.cmp-canvas {
  width: 100%;
  /* ✅ la height réelle vient du prop JS (chartHeight). Ici on garde juste un plancher. */
  min-height: 360px;
  display: block;
}

/* Variante compacte quand scroll activé : un peu moins d'espace vertical par ligne */
.cmp-table-wrap.scrollable .cmp-table th,
.cmp-table-wrap.scrollable .cmp-table td {
  padding: 8px 10px;
}
/* =========================
   𝐒𝐂𝐑𝐎𝐋𝐋𝐁𝐀𝐑𝐒 𝐒𝐎𝐌𝐁𝐑𝐄𝐒 (comparateur seulement)
   Appliqué à TOUT élément scrollable dans .cmp-page (table, listes, etc.)
  ========================= */
@supports (scrollbar-color: auto) {
  .cmp-page * {
    scrollbar-width: thin; /* Firefox */
    /* thumb | track */
    scrollbar-color: var(--cmp-scroll-thumb) var(--cmp-scroll-track);
  }
}
/* WebKit (Chrome/Edge/Opera/Safari) */
.cmp-page *::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
.cmp-page *::-webkit-scrollbar-track {
  background: var(--cmp-scroll-track);
  border-radius: 8px;
}
.cmp-page *::-webkit-scrollbar-thumb {
  background: var(--cmp-scroll-thumb);
  border-radius: 8px;
  border: 2px solid var(--cmp-scroll-track); /* marge interne propre */
}
.cmp-page *::-webkit-scrollbar-thumb:hover {
  background: var(--cmp-scroll-thumb-hover);
}

/* 🎯 Spécificité renforcée : table scrollable & liste de gauche */
.cmp-table-wrap.scrollable::-webkit-scrollbar,
.cmp-list::-webkit-scrollbar { width: 10px; }
.cmp-table-wrap.scrollable::-webkit-scrollbar-thumb,
.cmp-list::-webkit-scrollbar-thumb { border-radius: 10px; }

/* états génériques */
.cmp-empty, .cmp-error {
  padding: 24px;
  opacity: 0.85;
}
.cmp-error {
  color: #ff7a7a;
}

/* ===== Checkbox custom ===== */
/* — Conteneur & fond (toujours visible) */
.cmp-check {
  position: relative;
  width: 22px;
  height: 22px;
  display: inline-grid;
  place-items: center;
  border-radius: 6px;
}
.cmp-check::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 6px;
  background: var(--cmp-surface-2);
  border: 1px solid var(--cmp-stroke-0);
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.08);
  transition: background .12s ease, border-color .12s ease;
}
.cmp-check.on::before {
  background: linear-gradient(180deg, rgba(70,140,255,0.18), rgba(70,140,255,0.12));
  border-color: rgba(90,150,255,0.45);
}

/* — Input natif (accessibilité), invisible mais clique capte tout */
.cmp-check input {
  position: absolute;
  inset: 0;
  opacity: 0;
  cursor: pointer;
}

/* — Marque ✕ (2 traits) rendue dans un élément dédié pour éviter tout conflit */
.cmp-check-mark {
  position: relative;
  width: 12px;
  height: 12px;
  opacity: 0;
  transform: scale(0.85);
  transition: opacity .12s ease, transform .12s ease;
}
.cmp-check-mark::before,
.cmp-check-mark::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  width: 12px;
  height: 2px;
  background: #fff;
  border-radius: 2px;
  transform-origin: center;
  box-shadow: 0 1px 0 rgba(0,0,0,0.20);
}
.cmp-check-mark::before { transform: translate(-50%, -50%) rotate(45deg); }
.cmp-check-mark::after  { transform: translate(-50%, -50%) rotate(-45deg); }
.cmp-check.on .cmp-check-mark {
  opacity: 1;
  transform: scale(1);
}

/* — Hover / focus subtils, pas d’effet qui reste après décochage */
.cmp-check:hover::before { border-color: rgba(255,255,255,0.28); }
.cmp-check:focus-within::before {
  outline: 2px solid rgba(255,255,255,0.18);
  outline-offset: 2px;
}

/* Hover/focus de l'aire cliquable */
.cmp-check input:hover + .noop, .cmp-check:hover::before {
  border-color: rgba(255,255,255,0.28);
}
.cmp-check input:focus-visible + .noop, .cmp-check:focus-within::before {
  outline: 2px solid rgba(255,255,255,0.18);
  outline-offset: 2px;
}

/* sous-entête : période */
.cmp-table thead .cmp-subhead th {
  font-weight: 500;
  color: rgba(255,255,255,0.7);
  padding-top: 2px;
  padding-bottom: 8px;
}
.cmp-table thead .cmp-period-label { text-align: left; }
.cmp-table thead .cmp-period { white-space: nowrap; }


/* Responsive */
@media (max-width: 1080px) {
  .cmp-content {
    grid-template-columns: 1fr;
  }
  /* ✅ sur petits écrans, on laisse quand même plus de place à la liste */
  .cmp-list { max-height: calc(100vh - 240px); }
  .cmp-item { padding: 9px; }
  .cmp-item-title { font-size: 14px; }
  .cmp-badge--trades { min-width: 50px; padding: 5px 8px; }
  .cmp-check { width: 20px; height: 20px; }
  .cmp-check-mark { width: 11px; height: 11px; }
  /* 📱 Graphe : réduire les marges et autoriser la largeur mini + scroll si besoin */
  .cmp-page { padding: 24px 12px 48px; }
  .cmp-chart-head { padding: 12px 12px 0 12px; }
  .cmp-table-wrap { padding: 10px 12px 12px; }
}

/* 📱 Extra-compact < 600px : textes un poil plus petits, pills sur 2 lignes si besoin */
@media (max-width: 600px) {
  .cmp-title { font-size: 24px; }
  .cmp-chart-title { font-size: 16px; }
  .cmp-legend { gap: 6px; }
  .cmp-legend-pill { font-size: 11px; padding: 5px 8px; }
}

/* Accessibilité : focus discret sans accent persistant */
.cmp-item:focus-within {
  border-color: rgba(255,255,255,0.18);
  box-shadow: 0 0 0 2px rgba(255,255,255,0.08);
}