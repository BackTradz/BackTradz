

/* ============================================================
   OVERLAY INSIGHTS — TOKENS LOCAUX (pas de fuite globale)
   ============================================================ */
:where(.ins-root){
  /* tons + opacités */
  --ins-aurora-blue: 56,96,220;
  --ins-surface-1: 5,8,14;
  --ins-surface-2: 6,10,18;
  --ins-border: 90,130,255;
  --ins-border-alpha: .14;
  --ins-card-bd: 255,255,255;
  --ins-card-bd-alpha: .06;
  --ins-text-muted: #9aa3b2;
}

/* On force la modale au-dessus de toutes les cartes/menus */
.ins-root { position:fixed; inset:0; z-index:12000; }


.ins-backdrop{
  position:absolute;
  inset:0;
  background:
    /* aurora : lueur centrale/basse bleutée, très douce */
    radial-gradient(140% 100% at 50% 68%,
      rgba(56, 96, 220, 0.12)  0%,     /* halo un poil moins dense */
      rgba(22, 34, 68, 0.10)  42%,
      rgba(10, 16, 28, 0.08)  62%,
      rgba(6, 10, 18, 0.06)  82%,
      transparent 100%
    ),
    /* couche de profondeur quasi noire (comme la navbar) */
    linear-gradient(180deg,
      rgba(5, 8, 14, 0.70) 0%,         /* base plus transparente */
      rgba(6, 10, 18, 0.70) 100%
    );
  border: 1px solid rgba(90,130,255,0.14);      /* bord un peu moins présent */
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.04),   /* léger relief interne */
    0 10px 38px rgba(0,0,0,0.45),
    0 0 12px rgba(0,100,255,0.12);
  transition: box-shadow .4s ease, transform .4s ease, border-color .4s ease;
  backdrop-filter: blur(5px) saturate(112%);   /* +blur, -saturation = plus “verre” */
}
.ins-panel{
  position:absolute;
  inset:0;
  background:
    /* aurora : lueur centrale/basse bleutée, très douce */
    radial-gradient(140% 100% at 50% 68%,
      rgba(56, 96, 220, 0.10)  0%,     /* halo un poil moins dense */
      rgba(22, 34, 68, 0.09)  42%,
      rgba(10, 16, 28, 0.08)  62%,
      rgba(6, 10, 18, 0.06)  82%,
      transparent 100%
    ),
    /* couche de profondeur quasi noire (comme la navbar) */
    linear-gradient(180deg,
      rgba(5, 8, 14, 0.65) 0%,         /* base plus transparente */
      rgba(6, 10, 18, 0.65) 100%
    );
  border: 1px solid rgba(90,130,255,0.14);      /* bord un peu moins présent */
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.04),   /* léger relief interne */
    0 10px 38px rgba(0,0,0,0.45),
    0 0 12px rgba(0,100,255,0.12);
  transition: box-shadow .4s ease, transform .4s ease, border-color .4s ease;
  backdrop-filter: blur(8px) saturate(110%);   /* +blur, -saturation = plus “verre” */
  display:flex;
  flex-direction:column}
  
.ins-header{display:flex;justify-content:space-between;align-items:center;padding:16px 16px;border-bottom:1px solid rgba(255,255,255,.08)}
.ins-header .title{font-weight:800}
.ins-header .sub{color:#9aa3b2}
.ins-header .x{background:transparent;border:0;color:#e6ecff;font-size:18px;cursor:pointer}
/* Grand écran : titre + sous-titre sur une seule ligne, alignés baseline */
@media (min-width: 1050px){
  .ins-header .mh{display:flex; align-items:baseline; gap:16px;}
  .ins-header .sub{margin-top:0;}
}

.ins-tabs{padding: 12px; margin-bottom: 2px;} /* ⬅️ un poil moins d’espace au-dessus du select */
.ins-body{padding:2px 16px;overflow:auto}

/* premier bloc de contenu après les onglets : marge fine et contrôlée */
.ins-body > .ins-data:first-child,
.ins-body > .table-wrap:first-child{
  margin-top: 4px;                /* ⬇ supprime le “trou” visuel avant le tableau */
}
/* Si le tout premier bloc contient la toolbar (page “Par heure”), on serre au max */
.ins-body > .ins-data:first-child:has(.toolbar){ margin-top: 2px; }


.ins-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:10px}
.ins-kpi{background:#0c0f14;border:1px solid rgba(255,255,255,.06);border-radius:12px;padding:12px}
.ins-kpi .k{color:#9aa3b2;font-size:.9rem}
.ins-kpi .v{font-weight:800;font-size:1.1rem}

.ins-table{display:block}
.ins-table-head,.ins-table-row{display:grid;grid-template-columns:1fr .8fr .9fr .8fr auto;gap:8px;padding:10px;border-bottom:1px solid rgba(255,255,255,.06)}
.ins-table-head{
  background:#0f172a;
  border-radius:10px 10px 0 0}
.ins-table .right{display:flex;justify-content:flex-end}
.ins-table .pin{background:#0f172a;border:1px solid rgba(255,255,255,.12);border-radius:8px;padding:4px 8px;color:#e6ecff;cursor:pointer}

/* ============================================================
   TABLE METRICS — panneau verre unifié
   ============================================================ */

.ins-data .table-wrap{
  /* === VERRE GLOBAL (appliqué partout) === */
  overflow:auto;
  border-radius:12px;
  border:1px solid rgba(120,170,255,.10);
  background:
    /* léger vignettage bas pour profondeur */
    radial-gradient(120% 140% at 50% 115%, rgba(0,0,0,.14) 0%, rgba(0,0,0,0) 60%),
    /* couche quasi transparente : laisse respirer l’aurora du panel */
    linear-gradient(180deg, rgba(10,16,28,.64) 0%, rgba(8,12,20,.66) 100%);
  backdrop-filter: blur(10px) saturate(112%);
  -webkit-backdrop-filter: blur(10px) saturate(112%);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.035),
    0 12px 28px rgba(0,0,0,.32);
}

.ins-data table{
  width:max-content;
  min-width:100%;
  border-collapse: separate;
  border-spacing: 0;
}
.ins-data th,
.ins-data td{
  padding:6px 12px;
  white-space:nowrap;
  text-align:center;            /* par défaut : centré */
}

.more{margin-top:10px}

.pins{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px}

/* Épingles — même verre que .ins-data .table-wrap (spécificité overlay) */
.ins-panel .pin-card{
  /* reset anti style global */
  background-color: transparent !important;
  box-shadow: none;
  border-radius: 12px;
  border:1px solid rgba(120,170,255,.10);
  background:
    /* léger vignettage bas pour profondeur */
    radial-gradient(120% 140% at 50% 115%, rgba(0,0,0,.14) 0%, rgba(0,0,0,0) 60%),
    /* couche quasi transparente : laisse respirer l’aurora du panel */
    linear-gradient(180deg, rgba(10,16,28,.64) 0%, rgba(8,12,20,.66) 100%);
  backdrop-filter: blur(10px) saturate(112%);
  -webkit-backdrop-filter: blur(10px) saturate(112%);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.035),
    0 12px 28px rgba(0,0,0,.32);
  padding: 10px;
  background-clip: padding-box; /* rendu bordure identique au tableau */
}


.muted{color:#9aa3b2}
.skeleton{opacity:.75}
.error{color:#fecaca}


/* Actions / Pin & accessibilité */
.ins-data .right { text-align: right; }


/* header collant, neutre, très lisible */
.ins-data thead th{
  position:sticky; top:0; z-index:1;
  font-weight:800; letter-spacing:.1px;
  padding:10px 12px;
  background:
    linear-gradient(180deg, rgba(255,255,255,.018) 0%, rgba(255,255,255,0) 100%),
    linear-gradient(180deg, rgba(12,18,34,.86) 0%, rgba(10,16,28,.84) 100%);
  backdrop-filter: blur(4px) saturate(110%);
  -webkit-backdrop-filter: blur(4px) saturate(110%);
  border-bottom:1px solid rgba(255,255,255,.06);
  white-space:nowrap;
}

/* === lignes : AUCUNE interligne, pas de zebra ; hover film très léger === */
.ins-data tbody td{
  padding:10px 12px;
  background:transparent;       /* laisse passer l’aurora */
}
.ins-data tbody tr:nth-child(2n) td{ background:transparent; }
.ins-data tbody tr:hover td{
  background:
    radial-gradient(120% 180% at 50% 50%, rgba(255,255,255,.032) 0%, rgba(255,255,255,0) 70%);
}

/* coins visuels + alignements */
.ins-data thead th:first-child,
.ins-data tbody td:first-child{ padding-left:14px; text-align:left !important; }   /* libellé métrique à gauche */
.ins-data thead th:last-child,
.ins-data tbody td:last-child{ padding-right:14px; text-align:right; }  /* actions à droite */
.ins-data thead th:first-child{ border-top-left-radius:12px; }
.ins-data thead th:last-child{ border-top-right-radius:12px; }
.ins-data tbody tr:last-child td:first-child{ border-bottom-left-radius:12px; }
.ins-data tbody tr:last-child td:last-child{ border-bottom-right-radius:12px; }
.ins-data .right{ text-align:right; }

/* actions : ghost button propre */
.ins-data .pin{
  background: rgba(12,18,34,.40);
  border:1px solid rgba(255,255,255,.10);
  border-radius:8px;
  padding:6px 10px;
  color:#e6ecff;
  cursor:pointer;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.05);
}
.ins-data .pin:hover{
  background: rgba(12,18,34,.52);
  border-color: rgba(130,180,255,.18);
}
.ins-data .pin:focus-visible{
  outline:3px solid rgba(96,165,250,.45);
  outline-offset:2px;
}

/* KPIs : on garde ton vert unique, sans glow */
.ins-data .good, .ins-data .great{
  color:var(--ts-win-green, #34ff8a);
  text-shadow:none;
}


/* Masquer l’ancien bouton "Charger plus" sans toucher à la logique */
.ins-data .more{ display:none !important; }

/* ====== Fix ultra-petit écran : air symétrique autour des tabs (≤ 362px) ====== */
@media (max-width: 362px){
  /* on met l’air au NIVEAU DU WRAPPER, pour être indépendant du style des tabs */
  .ins-panel .ins-tabs{
    padding-inline: 12px;           /* ⬅️ 12px à gauche/droite, garanti */
    box-sizing: border-box;
  }
  .ins-panel .ins-tabs .pill-tabs.pill-tabs--overlay{
    /* éviter le double padding + double soustraction */
    margin-left: 0 !important;
    margin-right: 0 !important;
    padding-inline: 0 !important;      /* ⬅️ on garde l’air via le wrapper uniquement */
    max-width: 100% !important;        /* ⬅️ pas de calc(... -24px) ici */
    scrollbar-gutter: stable both-edges;/* ⬅️ réserve symétrique pour la scrollbar */
  }
}

/* --- Scrollbars internes (body + table-wrap) --- */
.ins-body,
.ins-data .table-wrap {
  scrollbar-width: thin;                  /* Firefox */
  scrollbar-color: rgba(255,255,255,.25) transparent;
}

.ins-body::-webkit-scrollbar,
.ins-data .table-wrap::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

.ins-body::-webkit-scrollbar-thumb,
.ins-data .table-wrap::-webkit-scrollbar-thumb {
  background: rgba(53, 43, 43, 0.25);
  border-radius: 8px;
}

.ins-body::-webkit-scrollbar-thumb:hover,
.ins-data .table-wrap::-webkit-scrollbar-thumb:hover {
  background: rgba(255,255,255,.4);
}

.ins-body::-webkit-scrollbar-track,
.ins-data .table-wrap::-webkit-scrollbar-track {
  background: transparent;
}

.ins-data .toolbar{
  display:flex; flex-wrap:wrap; align-items:center; gap:10px;
  margin:4px 0 6px;              /* ⬇ évite l’empilement des marges au-dessus */
}

/* ⚙️ Cas page "Par heure" (toolbar en premier) :
   - aucun espace au-dessus du select
   - un léger espace en bas pour ne pas coller au tableau */
.ins-body > .ins-data:first-child .toolbar{ margin: 0 0 10px; }

/* …encore plus serré tout en haut */
.ins-body > .ins-data:first-child .tz-switch{ margin-top: 0; }  /* on garde 0 */

/* Mobile : mêmes intentions mais encore un cran plus compact */
@media (max-width: 520px){
  .ins-body > .ins-data:first-child{ margin-top: 1px; }
  .ins-body > .ins-data:first-child .toolbar{ margin:0 0 8px; }
  .ins-body > .ins-data:first-child .tz-switch{ margin-top: 0px; }
}

.tz-label  { color:#9aa3b2; font-size:.9rem; min-width:64px; }

/* En-tête d'une carte pin : méta + bouton retirer */
.pin-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin-bottom:6px;
}
.pin-meta{
  display:flex;
  align-items:center;
  gap:10px;
  color:#cbd5e1;
}
.pin-sep{
  width:6px;
  height:6px;
  border-radius:9999px;
  background:rgba(255,255,255,.35); /* pipe visuel plus propre que "•" */
  display:inline-block;
}
.pin-value{
  font-weight:800;
  font-size:16px;
  margin:4px 0 6px;
}

/* Bouton Retirer (discret mais clair) */
.pin-remove{
  background:transparent;
  border:1px solid rgba(248,113,113,.35); /* rouge clair */
  color:#fecaca;
  padding:4px 10px;
  border-radius:8px;
  cursor:pointer;
}
.pin-remove:hover{
  background:rgba(248,113,113,.08);
  border-color:rgba(248,113,113,.6);
}

.pin-tz {
  color: #9aa3b2;
  font-size: 0.85em;
  margin-left: 4px;
}
/* alignements colonnes num / winrate */
.ins-data table th.right,
.ins-data table td.right { text-align: right; }


/* regroupe valeur + bouton dans le header */
.pin-right{
  display:flex;
  align-items:center;
  gap:12px;
}

/* Intégration douce du composant Select (strt-*) dans l’overlay */
.ins-data .strt-select{ min-width:220px; }
.ins-root .strt-panel{
  /* garantit un panneau sombre cohérent au-dessus de la modale si zStack="global" */
  background: linear-gradient(180deg, rgba(10,16,28,.80) 0%, rgba(8,12,20,.80) 100%);
  border:1px solid rgba(130,180,255,.20);
  box-shadow: 0 12px 28px rgba(0,0,0,.42);
}
/* scrollbars panel (select list) */
.ins-root .strt-panel::-webkit-scrollbar{ width:10px; }
.ins-root .strt-panel::-webkit-scrollbar-thumb{ background:rgba(255,255,255,.18); border-radius:8px; }
.ins-root .strt-panel::-webkit-scrollbar-thumb:hover{ background:rgba(255,255,255,.32); }
.ins-root .strt-panel{ scrollbar-width:thin; scrollbar-color:rgba(255,255,255,.18) transparent; }

@media (min-width:1024px){.ins-panel{inset:6% 8% 6% 8%;border-radius:14px;box-shadow:0 30px 80px rgba(2,8,23,.7)}}

